{"version":3,"sources":["main.js"],"names":["ConcepthoTerm","config","term","el","document","getElementById","termBuffer","initialMessage","lineBuffer","initialLine","cwd","tags","processCommand","cmd","maxBufferLength","commandHistory","currentCommandIndex","maxCommandHistory","autoFocus","coreCmds","clear","argv","argc","help","manText","version","hummm","console","warn","contact","concactText","shutdown","count","renderPartialTerm","setInterval","window","location","reload","fly","train","earthquake","body","classList","add","setTimeout","remove","update","ifrm","createElement","setAttribute","style","width","height","innerHTML","appendChild","requestFullScreen","element","requestMethod","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullScreen","call","ActiveXObject","wscript","SendKeys","fauxInput","getLeader","renderTerm","bell","ob","scrollTop","scrollHeight","writeToBuffer","str","length","diff","substr","processLine","stdout","line","split","isCoreCommand","hasOwnProperty","coreCommand","renderStdOut","i","max","start","RegExp","end","replace","addLineToHistory","unshift","log","splice","toggleCommandHistory","direction","newIndex","className","focus","addEventListener","e","acceptInput","isInputKey","keyCode","preventDefault","value","indexOf","ctrlKey","key","termEl","santosDumont","error","wrightBrothers"],"mappings":";AAAA,SAASA,EAAeC,GAClBC,IAAAA,EAAOD,EAAOE,IAAMC,SAASC,eAAe,QAC5CC,EAAaL,EAAOM,gBAAkB,GACtCC,EAAaP,EAAOQ,aAAe,GACnCC,EAAMT,EAAOS,KAAO,KACpBC,EAAOV,EAAOU,MAAQ,CAAC,MAAO,OAAQ,QAAS,QAC/CC,EAAiBX,EAAOY,MAAO,EAC/BC,EAAkBb,EAAOa,iBAAmB,KAC5CC,EAAiB,GACjBC,GAAuB,EACvBC,EAAoBhB,EAAOgB,mBAAqB,IAChDC,EAAYjB,EAAOiB,YAAa,EAChCC,EAAW,CACJC,MAwDFA,SAAOC,EAAMC,GAEb,OADPhB,EAAa,GACN,IAzDCiB,KA4DDA,SAAMF,EAAMC,GAgBZE,MAfS,s7BA5DLC,QA8EJA,WACA,MAAA,qGA9EFC,IAiFEA,WAEA,OADPC,QAAQC,KAAK,wDACN,8IAlFIC,QAqFJA,WAQAC,MAPa,yqBArFRC,SA+FLA,SAAUV,EAAMC,GACnBU,IAAAA,EAAQ,EACZ1B,EAAoG0B,uFAAAA,OAAAA,EAApG,oBACAC,IACAC,YAAY,WACI,IAAVF,EACFG,OAAOC,SAASC,UAEhB/B,EAAoG0B,uFAAAA,OAAAA,EAApG,oBACAC,IACAD,MAED,MA1GIM,IA6GAA,SAAKjB,EAAMC,GACX,MAAA,+KA7GEiB,MAgHFA,SAAOlB,EAAMC,GACb,MAAA,sJAhHOkB,WAmHPA,SAAYnB,EAAMC,GAOlB,OANPlB,SAASqC,KAAKC,UAAUC,IAAI,eAE5BC,WAAW,WACTxC,SAASqC,KAAKC,UAAUG,OAAO,gBAC9B,KAEI,8FAzHGC,OA4HHA,SAAQzB,EAAMC,GACfyB,IAAAA,EAAO3C,SAAS4C,cAAc,UAU7B,OATPD,EAAKE,aAAa,MAAO,iCACzBF,EAAKG,MAAMC,MAAQ,OACnBJ,EAAKG,MAAME,OAAS,QACpBhD,SAASqC,KAAKY,UAAY,GAC1BjD,SAASqC,KAAKC,UAAUC,IAAI,eAC5BvC,SAASqC,KAAKa,YAAYP,GAOnBQ,SAAmBC,GAEtBC,IAAAA,EAAgBD,EAAQD,mBAAqBC,EAAQE,yBAA2BF,EAAQG,sBAAwBH,EAAQI,oBAExHH,GAAAA,EACFA,EAAcI,KAAKL,QACd,QAAoC,IAAzBrB,OAAO2B,cAA+B,CAClDC,IAAAA,EAAU,IAAID,cAAc,iBAChB,OAAZC,GACFA,EAAQC,SAAS,UAdrBT,CAAkBnD,SAASqC,MAEpB,KApILwB,EAAY7D,SAAS4C,cAAc,YAO9BkB,SAAAA,IACAxD,OAAAA,EAAM,KAGNyD,SAAAA,IACHC,IACAC,EAAK/D,EAAa4D,IAAc1D,EACpCN,EAAKmD,UAAYgB,EACjBnE,EAAKmD,WAHM,6BAIXnD,EAAKoE,UAAYpE,EAAKqE,aAGftC,SAAAA,IACP/B,EAAKmD,UAAY/C,EAGVkE,SAAAA,EAAeC,GAIlBnE,IAHJA,GAAcmE,GAGCC,OAAS5D,EAAiB,CACnC6D,IAAAA,EAAOrE,EAAWoE,OAAS5D,EAC/BR,EAAaA,EAAWsE,OAAOD,IAoI1BE,SAAAA,IAEHC,IAAAA,EAAYC,EAAOvE,EAAgBa,EAAO0D,EAAKC,MAAM,KAAU1D,EAAOD,EAAKqD,OAE3E7D,EAAMQ,EAAK,GAEfb,GAAc,KACdgE,EAAcN,IAAc1D,GAC5BA,EAAa,GAGD,KAARK,KAea,KAVXiE,EA5BCG,SAAeF,GAClB5D,QAAAA,EAAS+D,eAAeH,GAwBrBE,CAAcpE,GAlBdsE,SAAa9D,EAAMC,GACtBT,IAAAA,EAAMQ,EAAK,GACRF,OAAAA,EAASN,GAAKQ,EAAMC,GAyBd6D,CAAY9D,EAAMC,GAPvBV,EACOA,EAAeS,EAAMC,GAErB,WAAaT,EAAM,oCAS9BiE,EAAS,WAAajE,EAAM,kCAI9B2D,EADAM,EA9JKM,SAAcX,GAEhBY,IADDA,IAAAA,EAAI,EAAOC,EAAM3E,EAAK+D,OAClBW,EAAIC,EAAKD,IAAK,CAChBE,IAAAA,EAAQ,IAAIC,OAAO,IAAM7E,EAAK0E,GAAK,IAAK,KACxCI,EAAM,IAAID,OAAO,KAAO7E,EAAK0E,GAAK,IAAK,KAE3CZ,GADAA,EAAMA,EAAIiB,QAAQH,EAAO,oBAAsB5E,EAAK0E,GAAK,OAC/CK,QAAQD,EAAK,WAElBhB,OAAAA,EAsJIW,CAAaN,IASjBa,SAAkBZ,GAGrBhE,GAFJA,EAAe6E,QAAQb,GACvB/D,GAAuB,EACnBD,EAAe2D,OAASzD,EAAmB,CAC7CU,QAAQkE,IAAI,iCACZlE,QAAQkE,IAAI9E,EAAe2D,QACvBC,IAAAA,EAAO5D,EAAe2D,OAASzD,EACnCF,EAAe+E,OAAO/E,EAAe2D,OAAS,EAAGC,GACjDhD,QAAQkE,IAAI9E,EAAe2D,SAd3BiB,CAAiBZ,IAGnBZ,IAuBO4B,SAAAA,EAAsBC,GACnBjF,EAAe2D,OAArBY,IACAW,EAAWjF,EAAsBgF,EAEjCC,GAAY,IAAGA,GAAY,GAC3BA,GAAYlF,EAAe2D,SAAQuB,EAAWlF,EAAe2D,OAAS,GAEtEuB,IAAajF,IACfA,EAAsBiF,GAKtBzF,EAFEyF,GAAY,EAEDlF,EAAekF,GAGf,GA3OjBhC,EAAUiC,UAAY,aACtB9F,SAASqC,KAAKa,YAAYW,GACtB/C,GACF+C,EAAUkC,QAuQZjG,EAAKkG,iBAAiB,QAAS,SAAUC,GACvCpC,EAAUkC,QACVjG,EAAKwC,UAAUC,IAAI,gBAErBsB,EAAUmC,iBAAiB,UA/BlBE,SAAaD,GA5BbE,IAAYC,EA6BnBH,EAAEI,iBAEFxC,EAAUyC,MAAQ,GAEdL,EAAEG,SAAW,IAAMH,EAAEG,SAAW,KAjCjBA,EAiCkCH,EAAEG,QAhCrC,CAAC,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACzDG,QAAQH,IAAY,GAgC7BH,EAAEO,UAELpG,GAAc6F,EAAEQ,KAIK,KAAdR,EAAEG,QACX3B,IACuB,IAAdwB,EAAEG,QACXhG,GAAc,KACS,KAAd6F,EAAEG,QACXT,EAAqB,GACE,KAAdM,EAAEG,QACXT,GAAsB,GACH,cAAVM,EAAEQ,MACXrG,EAAaA,EAAWoE,OAAO,EAAGpE,EAAWkE,OAAS,IAGxDP,MAQFF,EAAUmC,iBAAiB,OAAQ,SAAUC,GAC3CnG,EAAKwC,UAAUG,OAAO,gBAExBsB,IAGF,IAAM2C,EAAS1G,SAASC,eAAe,QAkBvC,SAAS0G,IACPpF,QAAQqF,MAAM,iGAGhB,SAASC,IACPtF,QAAQkE,IAAI,+EAAgF,YAAa,cAAe,cArBtHiB,GACF9G,EAAc,CACZG,GAAI2G,EACJpG,IAAK,wBACLH,eAAgB,8BAEhBI,KAAM,CAAC,MAAO,OAAQ,QAAS,QAC/BG,gBAAiB,KACjBG,kBAAmB,IACnBJ,IAAK,SAAUQ,EAAMC,GAEZ,OADPK,QAAQkE,IAAIxE,IACL,KAabc,OAAO4E,aAAeA,EACtB5E,OAAO8E,eAAiBA","file":"main.7eb9dcc7.map","sourceRoot":"src","sourcesContent":["function ConcepthoTerm (config) {\n  let term = config.el || document.getElementById('term')\n  let termBuffer = config.initialMessage || ''\n  let lineBuffer = config.initialLine || ''\n  let cwd = config.cwd || '~/'\n  let tags = config.tags || ['red', 'blue', 'white', 'bold']\n  let processCommand = config.cmd || false\n  let maxBufferLength = config.maxBufferLength || 8192\n  let commandHistory = []\n  let currentCommandIndex = -1\n  let maxCommandHistory = config.maxCommandHistory || 100\n  let autoFocus = config.autoFocus || false\n  let coreCmds = {\n    'clear': clear,\n    'help': help,\n    'version': version,\n    '?': hummm,\n    'contact': contact,\n    'shutdown': shutdown,\n    'fly': fly,\n    'train': train,\n    'earthquake': earthquake,\n    'update': update\n  }\n\n  let fauxInput = document.createElement('textarea')\n  fauxInput.className = 'faux-input'\n  document.body.appendChild(fauxInput)\n  if (autoFocus) {\n    fauxInput.focus()\n  }\n\n  function getLeader () {\n    return cwd + '$ '\n  }\n\n  function renderTerm () {\n    let bell = '<span class=\"bell\"></span>'\n    let ob = termBuffer + getLeader() + lineBuffer\n    term.innerHTML = ob\n    term.innerHTML += bell\n    term.scrollTop = term.scrollHeight\n  }\n\n  function renderPartialTerm () {\n    term.innerHTML = termBuffer\n  }\n\n  function writeToBuffer (str) {\n    termBuffer += str\n\n    // Stop the buffer getting massive.\n    if (termBuffer.length > maxBufferLength) {\n      let diff = termBuffer.length - maxBufferLength\n      termBuffer = termBuffer.substr(diff)\n    }\n  }\n\n  function renderStdOut (str) {\n    let i = 0; let max = tags.length\n    for (i; i < max; i++) {\n      let start = new RegExp('{' + tags[i] + '}', 'g')\n      let end = new RegExp('{/' + tags[i] + '}', 'g')\n      str = str.replace(start, '<span class=<br>\"' + tags[i] + '\">')\n      str = str.replace(end, '</span>')\n    }\n    return str\n  }\n\n  function clear (argv, argc) {\n    termBuffer = ''\n    return ''\n  }\n\n  function help (argv, argc) {\n    const manText = '' +\n    '<img style=\"margin: 15px 0 6px;height:40px;\" src=\"http://conceptho.com/img/logo-horizontal.png\"/><br>' +\n    'version: 0.0.1<br>' +\n    '-------------------------<br>' +\n    '<strong>Usage:</strong> <span style=\"color:#5dc570;\">[option]</span><br><br>' +\n    'Options:<br>' +\n    '  help          <span class=\"text-muted\">Show this help</span><br>' +\n    '  version       <span class=\"text-muted\">Print the conceptho terminal version</span><br>' +\n    '  ?             <span class=\"text-muted\">Secret command to show secret function <img width=\"15\" src=\"http://emojipedia.com.br/assets/img/emoji/1f609.png\"/></span><br>' +\n    '  contact       <span class=\"text-muted\">Show contact informations</span><br>' +\n    '  shutdown      <span class=\"text-muted\">Terminal shutdown</span><br>' +\n    '  fly           <span class=\"text-muted\">Do you remember the fly?</span><br>' +\n    '  earthquake    <span class=\"text-muted\">I\\'m feeling everything very quiet</span><br>' +\n    '  update        <span class=\"text-muted\">Update and restart windows</span><br><br>'\n\n    return manText\n  }\n\n  function version () {\n    return '<br><span style=\"color:#5dc570\">Conceptho terminal version: <strong>0.0.1</strong><br></span><br>'\n  }\n\n  function hummm () {\n    console.warn('Now we are talking! Who is the airplane\\'s inventor??')\n    return '<br><span style=\"color:#5dc570\">If you have not opened the <strong>console</strong> yet, you\\'ve started by the hard way...</span><br><br>'\n  }\n\n  function contact () {\n    const concactText = '<br>' +\n    '<strong>Conceptho contacts:</strong> <br><br>' +\n    'Email:        <span class=\"text-primary\"><a target=\"_blank\" href=\"mailto:vagas@conceptho.com\">vagas@conceptho.com</a></span><br>' +\n    'Site:         <span class=\"text-primary\"><a target=\"_blank\" href=\"http://conceptho.com\">conceptho.com</a></span><br>' +\n    'Facebook:     <span class=\"text-primary\"><a target=\"_blank\" href=\"https://www.facebook.com/conceptho/\">facebook.com/conceptho</a></span><br>' +\n    'Form:         <span class=\"text-primary\"><a target=\"_blank\" href=\"https://docs.google.com/forms/d/e/1FAIpQLScCv0-V9NsiaQiYnENji9C8LnekNb98BemAcbQRLQ2OU1PNCQ/viewform?formkey=dGx5Z1JzQXd0Q3lDcGEyUFFJYVpYZVE6MQ#gid=0\">fill form</a></span><br><br>'\n\n    return concactText\n  }\n\n  function shutdown (argv, argc) {\n    var count = 5\n    termBuffer = `<span style=\"color:#5dc570\">This terminal will <strong>shutdown</strong> in <strong>${count}</strong></span>`\n    renderPartialTerm()\n    setInterval(function () {\n      if (count === 0) {\n        window.location.reload()\n      } else {\n        termBuffer = `<span style=\"color:#5dc570\">This terminal will <strong>shutdown</strong> in <strong>${count}</strong></span>`\n        renderPartialTerm()\n        count--\n      }\n    }, 1000)\n  }\n\n  function fly (argv, argc) {\n    return '<br><span style=\"color:#5dc570\">Konami code in the team area in <a target=\"_blank\" href=\"http://conceptho.com/#team\">conceptho.com</a> can be interesting...</span><br><br>'\n  }\n\n  function train (argv, argc) {\n    return '<br><h5 style=\"color:#5dc570\">Congrats, you won a point. Send us an email and put it on the subject: <strong>I see a fly flying</strong>.</h5><br>'\n  }\n\n  function earthquake (argv, argc) {\n    document.body.classList.add('apply-shake')\n\n    setTimeout(function () {\n      document.body.classList.remove('apply-shake')\n    }, 1000)\n\n    return '<br><span style=\"color:#5dc570\">Feel the power of <strong>God CSS</strong>!</span><br><br>'\n  }\n\n  function update (argv, argc) {\n    const ifrm = document.createElement('iframe')\n    ifrm.setAttribute('src', 'http://fakeupdate.net/win10u/')\n    ifrm.style.width = '100%'\n    ifrm.style.height = '100vh'\n    document.body.innerHTML = ''\n    document.body.classList.add('body-update')\n    document.body.appendChild(ifrm)\n\n    requestFullScreen(document.body)\n\n    return ''\n  }\n\n  function requestFullScreen (element) {\n    // Supports most browsers and their versions.\n    var requestMethod = element.requestFullScreen || element.webkitRequestFullScreen || element.mozRequestFullScreen || element.msRequestFullScreen\n\n    if (requestMethod) { // Native full screen.\n      requestMethod.call(element)\n    } else if (typeof window.ActiveXObject !== 'undefined') { // Older IE.\n      var wscript = new ActiveXObject('WScript.Shell')\n      if (wscript !== null) {\n        wscript.SendKeys('{F11}')\n      }\n    }\n  }\n\n  function isCoreCommand (line) {\n    if (coreCmds.hasOwnProperty(line)) {\n      return true\n    }\n    return false\n  }\n\n  function coreCommand (argv, argc) {\n    let cmd = argv[0]\n    return coreCmds[cmd](argv, argc)\n  }\n\n  function processLine () {\n    // Dispatch command\n    let stdout; let line = lineBuffer; let argv = line.split(' '); let argc = argv.length\n\n    let cmd = argv[0]\n\n    lineBuffer += '\\n'\n    writeToBuffer(getLeader() + lineBuffer)\n    lineBuffer = ''\n\n    // If it's not a blank line.\n    if (cmd !== '') {\n      // If the command is not registered by the core.\n      if (!isCoreCommand(cmd)) {\n        // User registered command\n        if (processCommand) {\n          stdout = processCommand(argv, argc)\n        } else {\n          stdout = '<strong>' + cmd + '</strong>: command not found\\n'\n        }\n      } else {\n        // Execute a core command\n        stdout = coreCommand(argv, argc)\n      }\n\n      // If an actual command happened.\n      if (stdout === false) {\n        stdout = '<strong>' + cmd + '</strong>: command not found\\n'\n      }\n\n      stdout = renderStdOut(stdout)\n      writeToBuffer(stdout)\n\n      addLineToHistory(line)\n    }\n\n    renderTerm()\n  }\n\n  function addLineToHistory (line) {\n    commandHistory.unshift(line)\n    currentCommandIndex = -1\n    if (commandHistory.length > maxCommandHistory) {\n      console.log('reducing command history size')\n      console.log(commandHistory.length)\n      let diff = commandHistory.length - maxCommandHistory\n      commandHistory.splice(commandHistory.length - 1, diff)\n      console.log(commandHistory.length)\n    }\n  }\n\n  function isInputKey (keyCode) {\n    let inputKeyMap = [32, 190, 192, 189, 187, 220, 221, 219, 222, 186, 188, 191]\n    if (inputKeyMap.indexOf(keyCode) > -1) {\n      return true\n    }\n    return false\n  }\n\n  function toggleCommandHistory (direction) {\n    let max = commandHistory.length - 1\n    let newIndex = currentCommandIndex + direction\n\n    if (newIndex < -1) newIndex = -1\n    if (newIndex >= commandHistory.length) newIndex = commandHistory.length - 1\n\n    if (newIndex !== currentCommandIndex) {\n      currentCommandIndex = newIndex\n    }\n\n    if (newIndex > -1) {\n      // Change line to something from history.\n      lineBuffer = commandHistory[newIndex]\n    } else {\n      // Blank line...\n      lineBuffer = ''\n    }\n  }\n\n  function acceptInput (e) {\n    e.preventDefault()\n\n    fauxInput.value = ''\n\n    if (e.keyCode >= 48 && e.keyCode <= 90 || isInputKey(e.keyCode)) {\n      if (!e.ctrlKey) {\n        // Character input\n        lineBuffer += e.key\n      } else {\n        // Hot key input? I.e Ctrl+C\n      }\n    } else if (e.keyCode === 13) {\n      processLine()\n    } else if (e.keyCode === 9) {\n      lineBuffer += '\\t'\n    } else if (e.keyCode === 38) {\n      toggleCommandHistory(1)\n    } else if (e.keyCode === 40) {\n      toggleCommandHistory(-1)\n    } else if (e.key === 'Backspace') {\n      lineBuffer = lineBuffer.substr(0, lineBuffer.length - 1)\n    }\n\n    renderTerm()\n  }\n\n  term.addEventListener('click', function (e) {\n    fauxInput.focus()\n    term.classList.add('term-focus')\n  })\n  fauxInput.addEventListener('keydown', acceptInput)\n  fauxInput.addEventListener('blur', function (e) {\n    term.classList.remove('term-focus')\n  })\n  renderTerm()\n}\n\nconst termEl = document.getElementById('term')\n\nif (termEl) {\n  ConcepthoTerm({\n    el: termEl,\n    cwd: 'guest@conceptho.com:/',\n    initialMessage: 'Welcome to conceptho.com!\\n',\n\n    tags: ['red', 'blue', 'white', 'bold'],\n    maxBufferLength: 8192,\n    maxCommandHistory: 500,\n    cmd: function (argv, argc) {\n      console.log(argv)\n      return false\n    }\n  })\n}\n\nfunction santosDumont () {\n  console.error('Wrong! I\\'m also Brazilian, but the whole world knows it was not Santos Dumont. Try another...')\n}\n\nfunction wrightBrothers () {\n  console.log('You got it right! Have you seen the %ctrain %cthat passes in the %cterminal?', 'color:red', 'color:black', 'color:blue')\n}\n\nwindow.santosDumont = santosDumont\nwindow.wrightBrothers = wrightBrothers\n"]}